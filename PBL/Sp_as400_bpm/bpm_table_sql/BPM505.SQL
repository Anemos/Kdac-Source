--  Generate SQL 
--  Version:                   	V5R3M0 040528 
--  Generated on:              	09/05/20 16:15:12 
--  Relational Database:       	I520 
--  Standards Option:          	DB2 UDB iSeries 
--  사업계획 BOM 호환정보

DROP TABLE PBBPM.BPM505;

CREATE TABLE PBBPM.BPM505 ( 
	OCMCD CHAR(2) CCSID 833 NOT NULL , 
	XYEAR CHAR(4) CCSID 933 NOT NULL ,
	REVNO CHAR(2) CCSID 833 NOT NULL ,    -- 버전
	OPLANT CHAR(1) CCSID 833 NOT NULL , 
	ODVSN CHAR(1) CCSID 833 NOT NULL , 
	OPITN CHAR(15) CCSID 933 NOT NULL , 
	OFITN CHAR(15) CCSID 933 NOT NULL , 
	OCHDT CHAR(8) CCSID 933 NOT NULL , 
	OEDTM CHAR(8) CCSID 933 NOT NULL , 
	OEDTE CHAR(8) CCSID 933 NOT NULL , 
	ORATE NUMERIC(5, 2) NOT NULL , 
	OCHCD CHAR(1) CCSID 833 NOT NULL , 
	OFOCD CHAR(2) CCSID 833 NOT NULL , 
	OMACADDR CHAR(30) CCSID 933 NOT NULL , 
	OIPADDR CHAR(30) CCSID 933 NOT NULL , 
	OEMNO CHAR(6) CCSID 933 NOT NULL , 
	OINDT CHAR(8) CCSID 933 NOT NULL , 
	PRIMARY KEY( OCMCD , XYEAR, REVNO, OPLANT , ODVSN , OPITN , OFITN , OCHDT ) ) ;
	
--  Generate SQL
--  Version:                    V5R3M0 040528
--  Generated on:               10/08/19 16:52:42
--  Relational Database:        I520
--  Standards Option:           DB2 UDB iSeries
CREATE UNIQUE INDEX PBBPM.BPM505LA
  ON PBBPM.BPM505 ( OCMCD ASC , XYEAR ASC , REVNO ASC , OPLANT ASC , ODVSN ASC , OFITN ASC , OPITN ASC , OCHDT ASC ) ;

INSERT INTO PBBPM.BPM505
( OCMCD,XYEAR,REVNO,OPLANT,ODVSN,OPITN,OFITN,OCHDT,
OEDTM,OEDTE,ORATE,OCHCD,OFOCD,OMACADDR,OIPADDR,OEMNO,OINDT )
SELECT OCMCD,XYEAR,CASE WHEN XYEAR = '2010' THEN '0D' ELSE '0A' END,OPLANT,ODVSN,OPITN,OFITN,OCHDT,
OEDTM,OEDTE,ORATE,OCHCD,OFOCD,OMACADDR,OIPADDR,OEMNO,OINDT
FROM PBTEST.BPM505;

INSERT INTO PBBPM.BPM505
( OCMCD,XYEAR,REVNO,OPLANT,ODVSN,OPITN,OFITN,OCHDT,
OEDTM,OEDTE,ORATE,OCHCD,OFOCD,OMACADDR,OIPADDR,OEMNO,OINDT )
SELECT OCMCD,XYEAR,'0A',OPLANT,ODVSN,OPITN,OFITN,OCHDT,
OEDTM,OEDTE,ORATE,OCHCD,OFOCD,OMACADDR,OIPADDR,OEMNO,OINDT
FROM PBBPM.BPM505_0A WHERE XYEAR = '2010';